
select s.user_id,ifnull(asconfirmation_rate,0) as confirmation_rate from signups s
left join (select user_id, round(sum(if(action='confirmed',1,0))/count(*),2)
asconfirmation_rate from confirmations group by user_id) c on
s.user_id=c.user_id;

